import{a as e,o,l as t,d as a,c as l,M as n,b as s,e as i,g as r,F as u,G as c,cq as v,v as d,x as h,C as p,y as f,n as m,_ as w,k as g,B as b,U as y,ai as k,p as x,A as D,an as M,q as P,az as I}from"./index-HMHCBO22.js";import{n as T,y as C,s as _}from"./Layout.vue_vue_type_script_setup_true_lang-DggjovG3.js";function L(){const a=e(!1);function l(){a.value=window.innerWidth<768}return o((()=>{l(),window.addEventListener("resize",l)})),t((()=>{window.removeEventListener("resize",l)})),{isMobile:a,breakpoint:768}}const E={class:"thumbnail-list"},A=["onClick"],$={class:"thumbnail-wrapper"},W=["src","alt"],R={key:0,class:"thumbnail-loading"},Y={key:1,class:"thumbnail-indicator"},S={class:"thumbnail-index"},N=w(a({__name:"ThumbnailList",props:{photos:{},currentPhotoId:{}},emits:["select"],setup(o,{emit:t}){v((e=>({"70c589d4":`${x.value}px`})));const a=o,w=t,{isMobile:g}=L(),b=e(),y=l((()=>a.currentPhotoId?a.photos.findIndex((e=>e.id===a.currentPhotoId)):0)),k=l((()=>g.value?window.innerWidth<480?50:60:80)),x=l((()=>g.value?window.innerWidth<480?4:6:8));function D(e){return e.thumbnail||e.src}function M(e){b.value&&(e.preventDefault(),b.value.scrollLeft+=e.deltaY)}return n((()=>a.currentPhotoId),(function(){!b.value||y.value<0||m((()=>{const e=b.value,o=k.value+x.value,t=e.clientWidth,a=y.value*o-t/2+o/2;e.scrollTo({left:Math.max(0,a),behavior:"smooth"})}))}),{immediate:!0}),(e,o)=>(i(),s("div",E,[r("div",{ref_key:"scrollContainer",ref:b,class:"thumbnail-container",onWheel:M},[(i(!0),s(u,null,c(e.photos,((t,a)=>(i(),s("div",{key:t.id,class:h(["thumbnail-item",{active:t.id===e.currentPhotoId,loading:!t.src}]),style:d({width:`${k.value}px`,height:`${k.value}px`}),onClick:e=>{return o=t.id,void w("select",o);var o}},[r("div",$,[r("img",{src:D(t),alt:t.name||`Photo ${a+1}`,class:"thumbnail-image",loading:"lazy",draggable:"false"},null,8,W),t.src?p("",!0):(i(),s("div",R,o[0]||(o[0]=[r("div",{class:"thumbnail-spinner"},null,-1)]))),t.id===e.currentPhotoId?(i(),s("div",Y)):p("",!0)]),r("div",S,f(a+1),1)],14,A)))),128))],544)]))}}),[["__scopeId","data-v-6d3ae229"]]),z={class:"drawer-content"},X={class:"drawer-header"},U={class:"drawer-title"},B={class:"drawer-body"},O={key:0,class:"info-section"},q={class:"info-label"},F={class:"info-value"},j={key:0,class:"info-item"},V={class:"info-label"},H={class:"tags-container"},G={key:1,class:"custom-content"},Z={key:2,class:"empty-state"},J={class:"empty-text"},K={class:"drawer-header"},Q={class:"drawer-title"},ee={class:"drawer-body"},oe={key:0,class:"info-section"},te={class:"info-label"},ae={class:"info-value"},le={key:0,class:"info-item"},ne={class:"info-label"},se={class:"tags-container"},ie={key:1,class:"custom-content"},re={key:2,class:"empty-state"},ue={class:"empty-text"},ce=w(a({__name:"PhotoDrawer",props:{show:{type:Boolean},photo:{},config:{}},emits:["update:show"],setup(e,{emit:o}){const t=e,a=o,{isMobile:n}=L(),{t:v,locale:d}=g(),m=l((()=>{var e;return(null==(e=t.config)?void 0:e.title)||v("Photo Viewer Info")})),w=l((()=>{var e,o;return(null==(e=t.photo)?void 0:e.width)&&(null==(o=t.photo)?void 0:o.height)?T.calculateAspectRatio(t.photo.width,t.photo.height):v("Unknown")})),x=l((()=>[{key:"name",label:v("Filename"),formatter:e=>e||v("Unnamed"),show:()=>!0},{key:"extension",label:v("Format"),formatter:e=>C.formatExtension(e),show:()=>!0},{key:"size",label:v("File Size"),formatter:e=>T.fileSize(e),show:()=>!0},{key:"dimensions",label:v("Image Dimensions"),formatter:()=>{var e,o;return T.formatDimensions(null==(e=t.photo)?void 0:e.width,null==(o=t.photo)?void 0:o.height)},show:()=>!0},{key:"aspectRatio",label:v("Aspect Ratio"),formatter:()=>w.value,show:()=>!0},{key:"created_at",label:v("Created Time"),formatter:e=>e?_(e).format("YYYY-MM-DD HH:mm:ss"):v("Unknown"),show:()=>{var e;return!!(null==(e=t.photo)?void 0:e.created_at)}},{key:"is_public",label:v("Visibility"),formatter:e=>v(e?"Public":"Private"),show:()=>{var e;return void 0!==(null==(e=t.photo)?void 0:e.is_public)}}])),D=l((()=>{var e;return((null==(e=t.config)?void 0:e.fields)||x.value).filter((e=>(!e.show||e.show(t.photo))&&t.photo))}));function M(){a("update:show",!1)}return(e,o)=>(i(),s(u,null,[b(n)?p("",!0):(i(),s("div",{key:0,class:"photo-drawer-desktop",onClick:o[0]||(o[0]=y((()=>{}),["stop"]))},[r("div",z,[r("div",X,[r("h3",U,f(m.value),1)]),r("div",B,[e.photo?(i(),s("div",O,[(i(!0),s(u,null,c(D.value,(o=>(i(),s("div",{key:o.key,class:"info-item"},[r("span",q,f(o.label),1),r("span",F,f(o.formatter?o.formatter(e.photo[o.key]):e.photo[o.key]),1)])))),128)),e.photo.tags&&e.photo.tags.length>0?(i(),s("div",j,[r("span",V,f(b(v)("Tags")),1),r("div",H,[(i(!0),s(u,null,c(e.photo.tags,(e=>(i(),s("span",{key:e.id,class:"tag-badge"},f(e.name),1)))),128))])])):p("",!0)])):p("",!0),e.$slots.default?(i(),s("div",G,[k(e.$slots,"default",{},void 0,!0)])):p("",!0),e.photo?p("",!0):(i(),s("div",Z,[r("div",J,f(b(v)("No photo selected")),1)]))])])])),b(n)?(i(),s("div",{key:1,class:h(["photo-drawer-mobile",{show:e.show}]),onClick:M},[r("div",{class:"drawer-content",onClick:o[1]||(o[1]=y((()=>{}),["stop"]))},[r("div",K,[r("h3",Q,f(m.value),1),r("button",{class:"close-button",onClick:M},o[2]||(o[2]=[r("span",{class:"text-white text-lg"},"×",-1)]))]),r("div",ee,[e.photo?(i(),s("div",oe,[(i(!0),s(u,null,c(D.value,(o=>(i(),s("div",{key:o.key,class:"info-item"},[r("span",te,f(o.label),1),r("span",ae,f(o.formatter?o.formatter(e.photo[o.key]):e.photo[o.key]),1)])))),128)),e.photo.tags&&e.photo.tags.length>0?(i(),s("div",le,[r("span",ne,f(b(v)("Tags")),1),r("div",se,[(i(!0),s(u,null,c(e.photo.tags,(e=>(i(),s("span",{key:e.id,class:"tag-badge"},f(e.name),1)))),128))])])):p("",!0)])):p("",!0),e.$slots.default?(i(),s("div",ie,[k(e.$slots,"default",{},void 0,!0)])):p("",!0),e.photo?p("",!0):(i(),s("div",re,[r("div",ue,f(b(v)("No photo selected")),1)]))])])],2)):p("",!0)],64))}}),[["__scopeId","data-v-fb4817fc"]]);const ve={key:0,class:"photo-viewer"},de={class:"photo-viewer-main"},he={class:"photo-viewer-top-left"},pe={class:"photo-viewer-top-right"},fe={class:"flex gap-2"},me=["src","alt"],we={key:0,class:"photo-viewer-bottom"},ge={class:"photo-drawer-container"},be={key:1,class:"photo-viewer-mobile"},ye={class:"photo-viewer-top-left"},ke={class:"photo-viewer-top-right"},xe={class:"flex gap-2"},De=["src","alt"],Me={key:0,class:"photo-viewer-bottom"},Pe=w(a({__name:"PhotoViewer",props:{show:{type:Boolean},photos:{},currentPhotoId:{},config:{default:()=>({showThumbnails:!0,showDrawer:!0,drawerConfig:{defaultOpen:!1},controls:{showClose:!0,showInfo:!0,showNavigation:!0}})}},emits:["update:show","update:currentPhotoId","photo:change","photo:load","photo:error","drawer:toggle"],setup(a,{emit:u}){const c=a,v=u,{isMobile:f}=L(),w=function(a,n){const s=e(),i=e(),r=e(1),u=e(0),c=e(0),v=e(!1),d=e({x:0,y:0}),h=e(!1),p=e({x:0,y:0,scale:1}),f=e(0),m=e(0),w=l((()=>{const e=b(n);if(!e)return 0;const o=b(a).findIndex((o=>o.id===e));return-1===o?0:o})),g=l((()=>{const e=b(a);return e[w.value]||e[0]}));function y(){r.value=1,u.value=0,c.value=0}function k(){1===r.value?r.value=2:y()}function x(e){!v.value||r.value<=1||(u.value=e.clientX-d.value.x,c.value=e.clientY-d.value.y)}function D(){v.value=!1}function M(e){if(e.length<2)return 0;const o=e[0],t=e[1];return Math.sqrt(Math.pow(t.clientX-o.clientX,2)+Math.pow(t.clientY-o.clientY,2))}const P=l((()=>({transform:`translate(${u.value}px, ${c.value}px) scale(${r.value})`,cursor:r.value>1?v.value?"grabbing":"grab":"default"})));return o((()=>{document.addEventListener("mousemove",x),document.addEventListener("mouseup",D)})),t((()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",D)})),{imageRef:s,containerRef:i,scale:r,translateX:u,translateY:c,isDragging:v,imageLoaded:h,currentIndex:w,currentPhoto:g,imageTransform:P,goToPrevious:function(){return Math.max(0,w.value-1)},goToNext:function(){const e=b(a);return Math.min(e.length-1,w.value+1)},resetImageState:function(){r.value=1,u.value=0,c.value=0,h.value=!1},zoomIn:function(){const e=Math.min(5,r.value+.5);r.value=e},zoomOut:function(){const e=Math.max(.1,r.value-.5);r.value=e,e<=1&&(u.value=0,c.value=0)},resetZoom:y,handleDoubleClick:k,handleWheel:function(e){e.preventDefault();const o=e.deltaY>0?-.1:.1,t=Math.max(.1,Math.min(5,r.value+o));r.value=t,t<=1&&(u.value=0,c.value=0)},handleMouseDown:function(e){r.value<=1||(v.value=!0,d.value={x:e.clientX-u.value,y:e.clientY-c.value},e.preventDefault())},handleImageLoad:function(){h.value=!0},handleImageError:function(e){h.value=!1},handleTouchStart:function(e){const o=Date.now(),t=e.touches;if(1===t.length){const e=t[0];if(o-m.value<300)return void k();m.value=o,r.value>1&&(v.value=!0,d.value={x:e.clientX-u.value,y:e.clientY-c.value})}else 2===t.length&&(e.preventDefault(),v.value=!1,f.value=M(t),p.value={x:(t[0].clientX+t[1].clientX)/2,y:(t[0].clientY+t[1].clientY)/2,scale:r.value})},handleTouchMove:function(e){const o=e.touches;if(1===o.length&&v.value&&r.value>1){e.preventDefault();const t=o[0];u.value=t.clientX-d.value.x,c.value=t.clientY-d.value.y}else if(2===o.length){e.preventDefault();const t=M(o);if(f.value>0){const e=t/f.value,o=Math.max(.5,Math.min(3,p.value.scale*e));r.value=o,o<=1&&(u.value=0,c.value=0)}}},handleTouchEnd:function(e){0===e.touches.length&&(v.value=!1)}}}(l((()=>c.photos)),l((()=>c.currentPhotoId))),g=e(!1),T=e(!1),C=l((()=>w.currentIndex.value>0)),_=l((()=>w.currentIndex.value<c.photos.length-1));function E(){v("update:show",!1)}function A(e){v("update:currentPhotoId",e)}function $(){if(C.value){const e=w.goToPrevious(),o=c.photos[e];o&&v("update:currentPhotoId",o.id)}}function W(){if(_.value){const e=w.goToNext(),o=c.photos[e];o&&v("update:currentPhotoId",o.id)}}function R(){g.value=!g.value,v("drawer:toggle",g.value)}function Y(){var e;f.value?g.value=!1:g.value=(null==(e=c.config.drawerConfig)?void 0:e.defaultOpen)??!1}return function(e){function a(o){var t,a,l,n,s,i,r;switch(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Space"].includes(o.code)&&o.preventDefault(),o.code){case"Escape":null==(t=e.onEscape)||t.call(e);break;case"ArrowLeft":null==(a=e.onArrowLeft)||a.call(e);break;case"ArrowRight":null==(l=e.onArrowRight)||l.call(e);break;case"ArrowUp":null==(n=e.onArrowUp)||n.call(e);break;case"ArrowDown":null==(s=e.onArrowDown)||s.call(e);break;case"Space":null==(i=e.onSpace)||i.call(e);break;case"Enter":null==(r=e.onEnter)||r.call(e)}}o((()=>{document.addEventListener("keydown",a)})),t((()=>{document.removeEventListener("keydown",a)}))}({onEscape:E,onArrowLeft:$,onArrowRight:W,onSpace:R}),o((()=>{Y()})),n((()=>c.show),(e=>{e?(w.resetImageState(),Y(),m((()=>{document.body.style.overflow="hidden"}))):(document.body.style.overflow="",g.value=!1)})),n((()=>c.currentPhotoId),(()=>{w.resetImageState()})),n((()=>w.currentPhoto.value),(e=>{e&&v("photo:change",e)}),{immediate:!0}),(e,o)=>{var t,a,l,n,u,c,m,L,Y,S,z,X,U,B;return i(),x(I,{to:"body"},[e.show?(i(),s("div",ve,[r("div",{class:"photo-viewer-backdrop",onClick:E}),r("div",{class:"photo-viewer-bg",style:d({backgroundImage:`url(${(null==(t=b(w).currentPhoto.value)?void 0:t.thumbnail)||(null==(a=b(w).currentPhoto.value)?void 0:a.src)})`})},null,4),b(f)?(i(),s("div",be,[r("div",ye,[k(e.$slots,"top-left",{photo:b(w).currentPhoto.value},void 0,!0)]),r("div",ke,[r("div",xe,[k(e.$slots,"top-right",{photo:b(w).currentPhoto.value},void 0,!0),(null==(Y=e.config.controls)?void 0:Y.showInfo)&&e.config.showDrawer?(i(),s("button",{key:0,class:"viewer-button info-button",onClick:R},[D(b(M),{icon:"fa-solid fa-info",class:"text-sm text-white"})])):p("",!0),(null==(S=e.config.controls)?void 0:S.showClose)?(i(),s("button",{key:1,class:"viewer-button close-button",onClick:E},[D(b(M),{icon:"fa-solid fa-times",class:"text-sm text-white"})])):p("",!0)])]),r("div",{ref:"viewer.containerRef",class:"photo-viewer-image-container",onWheel:o[20]||(o[20]=(...e)=>b(w).handleWheel&&b(w).handleWheel(...e)),onDblclick:o[21]||(o[21]=(...e)=>b(w).handleDoubleClick&&b(w).handleDoubleClick(...e)),onTouchstart:o[22]||(o[22]=(...e)=>b(w).handleTouchStart&&b(w).handleTouchStart(...e)),onTouchmove:o[23]||(o[23]=(...e)=>b(w).handleTouchMove&&b(w).handleTouchMove(...e)),onTouchend:o[24]||(o[24]=(...e)=>b(w).handleTouchEnd&&b(w).handleTouchEnd(...e))},[(null==(z=e.config.controls)?void 0:z.showNavigation)&&C.value?(i(),s("button",{key:0,class:"photo-viewer-nav photo-viewer-nav-prev",onClick:$,onDblclick:o[12]||(o[12]=y((()=>{}),["stop"]))},[D(b(M),{icon:"fa-solid fa-chevron-left",class:"text-white text-sm"})],32)):p("",!0),(null==(X=e.config.controls)?void 0:X.showNavigation)&&_.value?(i(),s("button",{key:1,class:"photo-viewer-nav photo-viewer-nav-next",onClick:W,onDblclick:o[13]||(o[13]=y((()=>{}),["stop"]))},[D(b(M),{icon:"fa-solid fa-chevron-right",class:"text-white text-sm"})],32)):p("",!0),r("img",{ref:"viewer.imageRef",src:null==(U=b(w).currentPhoto.value)?void 0:U.src,alt:(null==(B=b(w).currentPhoto.value)?void 0:B.name)||"Photo",class:"photo-viewer-image",style:d(b(w).imageTransform.value),draggable:"false",onLoad:o[14]||(o[14]=(...e)=>b(w).handleImageLoad&&b(w).handleImageLoad(...e)),onError:o[15]||(o[15]=e=>v("photo:error",b(w).currentPhoto.value,new Error("Image failed to load"))),onMousedown:o[16]||(o[16]=(...e)=>b(w).handleMouseDown&&b(w).handleMouseDown(...e)),onDragstart:o[17]||(o[17]=y((()=>{}),["prevent"])),onDrag:o[18]||(o[18]=y((()=>{}),["prevent"])),onDragend:o[19]||(o[19]=y((()=>{}),["prevent"]))},null,44,De)],544),e.config.showThumbnails?(i(),s("div",Me,[D(N,{photos:e.photos,"current-photo-id":e.currentPhotoId,onSelect:A},null,8,["photos","current-photo-id"])])):p("",!0),e.config.showDrawer?(i(),x(ce,{key:1,show:g.value,photo:b(w).currentPhoto.value,config:e.config.drawerConfig,"onUpdate:show":o[25]||(o[25]=e=>g.value=e)},{default:P((()=>[k(e.$slots,"drawer-content",{photo:b(w).currentPhoto.value},void 0,!0)])),_:3},8,["show","photo","config"])):p("",!0)])):(i(),s("div",{key:0,class:h(["photo-viewer-desktop",{"has-drawer":g.value}])},[r("div",de,[r("div",he,[k(e.$slots,"top-left",{photo:b(w).currentPhoto.value},void 0,!0)]),r("div",pe,[r("div",fe,[k(e.$slots,"top-right",{photo:b(w).currentPhoto.value},void 0,!0),(null==(l=e.config.controls)?void 0:l.showInfo)&&e.config.showDrawer?(i(),s("button",{key:0,class:"viewer-button info-button",onClick:R},[D(b(M),{icon:"fa-solid fa-info",class:"text-sm text-white"})])):p("",!0),(null==(n=e.config.controls)?void 0:n.showClose)?(i(),s("button",{key:1,class:"viewer-button close-button",onClick:E},[D(b(M),{icon:"fa-solid fa-times",class:"text-sm text-white"})])):p("",!0)])]),r("div",{ref:"viewer.containerRef",class:"photo-viewer-image-container",onWheel:o[8]||(o[8]=(...e)=>b(w).handleWheel&&b(w).handleWheel(...e)),onDblclick:o[9]||(o[9]=(...e)=>b(w).handleDoubleClick&&b(w).handleDoubleClick(...e)),onMouseenter:o[10]||(o[10]=e=>T.value=!0),onMouseleave:o[11]||(o[11]=e=>T.value=!1)},[(null==(u=e.config.controls)?void 0:u.showNavigation)&&C.value&&(b(f)||T.value)?(i(),s("button",{key:0,class:"photo-viewer-nav photo-viewer-nav-prev",onClick:$,onDblclick:o[0]||(o[0]=y((()=>{}),["stop"]))},[D(b(M),{icon:"fa-solid fa-chevron-left",class:"text-white text-sm"})],32)):p("",!0),(null==(c=e.config.controls)?void 0:c.showNavigation)&&_.value&&(b(f)||T.value)?(i(),s("button",{key:1,class:"photo-viewer-nav photo-viewer-nav-next",onClick:W,onDblclick:o[1]||(o[1]=y((()=>{}),["stop"]))},[D(b(M),{icon:"fa-solid fa-chevron-right",class:"text-white text-sm"})],32)):p("",!0),r("img",{ref:"viewer.imageRef",src:null==(m=b(w).currentPhoto.value)?void 0:m.src,alt:(null==(L=b(w).currentPhoto.value)?void 0:L.name)||"Photo",class:"photo-viewer-image",style:d(b(w).imageTransform.value),draggable:"false",onLoad:o[2]||(o[2]=(...e)=>b(w).handleImageLoad&&b(w).handleImageLoad(...e)),onError:o[3]||(o[3]=e=>v("photo:error",b(w).currentPhoto.value,new Error("Image failed to load"))),onMousedown:o[4]||(o[4]=(...e)=>b(w).handleMouseDown&&b(w).handleMouseDown(...e)),onDragstart:o[5]||(o[5]=y((()=>{}),["prevent"])),onDrag:o[6]||(o[6]=y((()=>{}),["prevent"])),onDragend:o[7]||(o[7]=y((()=>{}),["prevent"]))},null,44,me)],544),e.config.showThumbnails?(i(),s("div",we,[D(N,{photos:e.photos,"current-photo-id":e.currentPhotoId,onSelect:A},null,8,["photos","current-photo-id"])])):p("",!0)]),e.config.showDrawer?(i(),s("div",{key:0,class:h(["photo-viewer-drawer",{show:g.value}])},[r("div",ge,[D(ce,{show:g.value,photo:b(w).currentPhoto.value,config:e.config.drawerConfig},{default:P((()=>[k(e.$slots,"drawer-content",{photo:b(w).currentPhoto.value},void 0,!0)])),_:3},8,["show","photo","config"])])],2)):p("",!0)],2))])):p("",!0)])}}}),[["__scopeId","data-v-c19f2dc4"]]),Ie={class:"waterfall-wrapper relative w-full"},Te={class:"waterfall-item-content w-full"},Ce={key:0,class:"load-more-wrapper flex justify-center",style:{marginTop:"20px"}},_e=w(a({__name:"WaterfallLayout",props:{items:{type:Array,required:!0,default:()=>[]},columnWidth:{type:Number,default:250},gap:{type:Number,default:8},loading:{type:Boolean,default:!1},showLoadMore:{type:Boolean,default:!0}},emits:["loadMore"],setup(a,{expose:v,emit:f}){const w=a,g=e(),b=e(1),y=e([]),x=e([]),D=e([]),M=e([]),P=()=>{if(!g.value)return 1;const e=g.value.clientWidth,o=Math.floor(e/(w.columnWidth+w.gap));return Math.min(Math.max(1,o),6)},I=()=>{if(!g.value||0===w.items.length)return x.value=[],y.value=[],D.value=[],void T();const e=b.value,o=g.value.clientWidth;if(o<=0)return;const t=o-(e-1)*w.gap,a=Math.max(100,t/e);y.value=new Array(e).fill(0),x.value=new Array(w.items.length);const l=D.value.length;D.value=new Array(w.items.length).fill(!1);for(let n=0;n<Math.min(l,w.items.length);n++)D.value[n]=!0;w.items.forEach(((e,o)=>{const t=y.value.indexOf(Math.min(...y.value)),l=t*(a+w.gap),n=y.value[t];let s=200;if(e.width&&e.height&&e.width>0){s=e.height/e.width*a,s=Math.max(100,Math.min(s,600))}x.value[o]={left:l,top:n,width:a},y.value[t]+=s+w.gap})),C(l)},T=()=>{M.value.forEach((e=>clearTimeout(e))),M.value=[]},C=e=>{T();for(let o=e;o<w.items.length;o++){const t=setTimeout((()=>{o<D.value.length&&(D.value[o]=!0)}),100*(o-e));M.value.push(t)}},_=l((()=>0===y.value.length?0:Math.max(...y.value)));let L;n((()=>w.items),(()=>{m((()=>{I()}))}),{deep:!0}),n((()=>w.loading),(e=>{e||m((()=>{I()}))})),n(b,(()=>{m((()=>{I()}))}));let E=null;const A=()=>{m((()=>{b.value=P(),I()}))};o((()=>{if(b.value=P(),m((()=>{I()})),window.addEventListener("waterfall-recalculate",A),g.value){let e=0;E=new ResizeObserver((o=>{for(const t of o){const{width:o}=t.contentRect;o>0&&Math.abs(o-e)>1&&(e=o,clearTimeout(L),L=setTimeout((()=>{const e=P();e!==b.value&&(b.value=e),m((()=>{I()}))}),30))}})),E.observe(g.value);let o=g.value.parentElement;for(;o&&(E.observe(o),o=o.parentElement,"BODY"!==(null==o?void 0:o.tagName)&&!(null==o?void 0:o.classList.contains("layout-container"))););}})),t((()=>{E&&(E.disconnect(),E=null),window.removeEventListener("waterfall-recalculate",A),L&&clearTimeout(L),T()}));const $=f,W=()=>{$("loadMore")};return v({recalculateLayout:()=>{m((()=>{b.value=P(),I()}))}}),(e,o)=>(i(),s("div",Ie,[r("div",{ref_key:"containerRef",ref:g,class:"waterfall-container relative w-full",style:d({height:_.value+"px"})},[(i(!0),s(u,null,c(a.items,((o,t)=>{var a,l,n;return i(),s("div",{key:o.id||t,class:h(["waterfall-item absolute transition-all duration-500 ease-out",{"item-visible":D.value[t],"item-hidden":!D.value[t]}]),style:d({left:(null==(a=x.value[t])?void 0:a.left)+"px",top:(null==(l=x.value[t])?void 0:l.top)+"px",width:(null==(n=x.value[t])?void 0:n.width)+"px"})},[r("div",Te,[k(e.$slots,"default",{item:o,index:t},void 0,!0)])],6)})),128))],4),a.showLoadMore&&!a.loading&&a.items.length>0?(i(),s("div",Ce,[r("button",{onClick:W,class:"load-more-btn px-4 py-2 text-gray-600 hover:text-blue-500 transition-colors duration-200 text-sm font-medium border-none bg-transparent cursor-pointer"}," 加载更多 ")])):p("",!0)]))}}),[["__scopeId","data-v-352dba19"]]);export{Pe as P,_e as W};
