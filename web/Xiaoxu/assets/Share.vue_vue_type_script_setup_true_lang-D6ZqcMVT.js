import{d as e,a,k as l,aB as t,p as s,B as o,ar as u,q as r,g as i,A as n,b as d,D as p,E as c,y as v,an as m,at as f,e as y}from"./index-HMHCBO22.js";import{a as b}from"./album-DI7nO5SG.js";import{u as x}from"./composables-sjxCGT15.js";import{a as _,j as h,k as w,g,x as k,y as C}from"./Layout.vue_vue_type_script_setup_true_lang-DggjovG3.js";const $=e({__name:"Delete",setup(e,{expose:s}){const o=b(),u=a({}),r=x(),{t:i}=l();return s({open:function(e,a=()=>{}){u.value=e;const l=r.warning({title:i("Delete Album"),content:i("Are you sure you want to delete this album?"),positiveText:i("Confirm"),negativeText:i("Cancel"),onPositiveClick:()=>(l.loading=!0,new Promise((e=>{t({path:{id:u.value.id}}).then((()=>{o.deleteAlbums([u.value.id]),a(),e(!0)})).finally((()=>{l.loading=!1}))})))})}}),(e,a)=>null}}),j={class:"flex flex-col space-y-4"},A={key:0,class:"flex justify-end"},D={key:1,class:"flex justify-between space-x-2"},S=e({__name:"Share",setup(e,{expose:t}){const b=a(!1),x=a({}),$=a(),S=a({type:"album",ids:[]}),T={},E=a(""),U=_(),{t:B}=l();function P(){f({body:S.value}).then((e=>{var a,l,t;if("error"===(null==(a=e.data)?void 0:a.status))return U.error(null==(l=e.data)?void 0:l.message);E.value=`${window.location.origin}/shares/${null==(t=e.data)?void 0:t.data.slug}`}))}return t({open:function(e){E.value="",x.value=e,S.value.ids=[x.value.id],b.value=!0}}),(e,a)=>(y(),s(o(u),{show:b.value,"onUpdate:show":a[4]||(a[4]=e=>b.value=e),title:e.$t("Share Album"),preset:"card",size:"small",bordered:!1,class:"max-w-screen-sm mx-4 md:mx-auto"},{action:r((()=>[E.value?(y(),d("div",D,[n(o(g),{class:"grow select-all","default-value":E.value,readonly:""},null,8,["default-value"]),n(o(p),{tertiary:"",type:"primary",class:"shrink-0",onClick:a[3]||(a[3]=()=>{o(C).copyText(E.value).then((()=>{o(U).success(o(B)("Copy successful"))})).catch((()=>{o(U).error(o(B)("Copy failed"))}))})},{icon:r((()=>[n(o(m),{icon:"fa-solid fa-copy"})])),_:1})])):(y(),d("div",A,[n(o(p),{tertiary:"",onClick:P},{default:r((()=>[c(v(e.$t("Create Share Link")),1)])),_:1})]))])),default:r((()=>[i("div",j,[n(o(h),{ref_key:"formRef",ref:$,model:S.value,rules:T,disabled:Boolean(E.value)},{default:r((()=>[n(o(w),{label:e.$t("Share Description"),path:"content"},{default:r((()=>[n(o(g),{resizable:"",type:"textarea",value:S.value.content,"onUpdate:value":a[0]||(a[0]=e=>S.value.content=e)},null,8,["value"])])),_:1},8,["label"]),n(o(w),{label:e.$t("Password"),path:"password"},{default:r((()=>[n(o(g),{type:"password",value:S.value.password,"onUpdate:value":a[1]||(a[1]=e=>S.value.password=e)},null,8,["value"])])),_:1},8,["label"]),n(o(w),{label:e.$t("Expiration Time"),path:"password"},{default:r((()=>[n(o(k),{"formatted-value":S.value.expired_at,"onUpdate:formattedValue":a[2]||(a[2]=e=>S.value.expired_at=e),type:"datetime",class:"w-full",placeholder:e.$t("Select Expiration Time"),"is-date-disabled":e=>e<Date.now(),"value-format":"yyyy-MM-dd HH:mm:ss",clearable:""},null,8,["formatted-value","placeholder","is-date-disabled"])])),_:1},8,["label"])])),_:1},8,["model","disabled"])])])),_:1},8,["show","title"]))}});export{$ as _,S as a};
