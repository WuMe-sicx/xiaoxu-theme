import{Z as e,b9 as i,a1 as t,d as l,a2 as n,bl as s,aJ as r,bz as o,a,c,bA as p,bk as u}from"./index-HMHCBO22.js";import{m as d}from"./Layout.vue_vue_type_script_setup_true_lang-DggjovG3.js";const g=e("ellipsis",{overflow:"hidden"},[i("line-clamp","\n white-space: nowrap;\n display: inline-block;\n vertical-align: bottom;\n max-width: 100%;\n "),t("line-clamp","\n display: -webkit-inline-box;\n -webkit-box-orient: vertical;\n "),t("cursor-pointer","\n cursor: pointer;\n ")]);function v(e){return`${e}-ellipsis--line-clamp`}function f(e,i){return`${e}-ellipsis--cursor-${i}`}const m=Object.assign(Object.assign({},r.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),b=l({name:"Ellipsis",inheritAttrs:!1,props:m,slots:Object,setup(e,{slots:i,attrs:t}){const l=s(),d=r("Ellipsis","-ellipsis",g,o,e,l),m=a(null),b=a(null),h=a(null),w=a(!1),T=c((()=>{const{lineClamp:i}=e,{value:t}=w;return void 0!==i?{textOverflow:"","-webkit-line-clamp":t?"":i}:{textOverflow:t?"":"ellipsis","-webkit-line-clamp":""}}));function k(){let i=!1;const{value:t}=w;if(t)return!0;const{value:n}=m;if(n){const{lineClamp:t}=e;if(function(i){if(!i)return;const t=T.value,n=v(l.value);void 0!==e.lineClamp?C(i,n,"add"):C(i,n,"remove");for(const e in t)i.style[e]!==t[e]&&(i.style[e]=t[e])}(n),void 0!==t)i=n.scrollHeight<=n.offsetHeight;else{const{value:e}=b;e&&(i=e.getBoundingClientRect().width<=n.getBoundingClientRect().width)}!function(i,t){const n=f(l.value,"pointer");"click"!==e.expandTrigger||t?C(i,n,"remove"):C(i,n,"add")}(n,i)}return i}const x=c((()=>"click"===e.expandTrigger?()=>{var e;const{value:i}=w;i&&(null===(e=h.value)||void 0===e||e.setShow(!1)),w.value=!i}:void 0));p((()=>{var i;e.tooltip&&(null===(i=h.value)||void 0===i||i.setShow(!1))}));function C(e,i,t){"add"===t?e.classList.contains(i)||e.classList.add(i):e.classList.contains(i)&&e.classList.remove(i)}return{mergedTheme:d,triggerRef:m,triggerInnerRef:b,tooltipRef:h,handleClick:x,renderTrigger:()=>n("span",Object.assign({},u(t,{class:[`${l.value}-ellipsis`,void 0!==e.lineClamp?v(l.value):void 0,"click"===e.expandTrigger?f(l.value,"pointer"):void 0],style:T.value}),{ref:"triggerRef",onClick:x.value,onMouseenter:"click"===e.expandTrigger?k:void 0}),e.lineClamp?i:n("span",{ref:"triggerInnerRef"},i)),getTooltipDisabled:k}},render(){var e;const{tooltip:i,renderTrigger:t,$slots:l}=this;if(i){const{mergedTheme:s}=this;return n(d,Object.assign({ref:"tooltipRef",placement:"top"},i,{getDisabled:this.getTooltipDisabled,theme:s.peers.Tooltip,themeOverrides:s.peerOverrides.Tooltip}),{trigger:t,default:null!==(e=l.tooltip)&&void 0!==e?e:l.default})}return t()}});export{b as N,f as a,v as c,m as e,g as s};
