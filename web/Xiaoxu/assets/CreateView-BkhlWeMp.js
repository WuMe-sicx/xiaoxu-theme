import{d as e,k as t,a as l,p as a,q as s,A as u,B as r,g as i,R as n,U as o,D as d,E as p,y as v,u as c,e as _,aX as f}from"./index-HMHCBO22.js";import{a as m,_ as g,L as h,j as y,k as b,g as k,l as $}from"./Layout.vue_vue_type_script_setup_true_lang-DggjovG3.js";import{_ as x}from"./Content.vue_vue_type_script_setup_true_lang-BU2yl4QK.js";import{_ as w}from"./Back.vue_vue_type_script_setup_true_lang-CqzeplWU.js";const j={class:"space-x-2"},P=e({__name:"CreateView",setup(e){const P=m(),C=c(),{t:q}=t(),L=l(!1),T=l({level:"low"}),U=l(null),D={title:{type:"string",required:!0,trigger:["blur","input"],message:q("Please enter the ticket title")},level:{type:"string",required:!0,trigger:["blur","input"],message:q("Please select the ticket level")},content:{type:"string",required:!0,trigger:["blur","input"],message:q("Please describe the issue you encountered")}},B=[{label:q("Low"),value:"low"},{label:q("Medium"),value:"medium"},{label:q("High"),value:"high"}],M=async e=>{var t;e.preventDefault(),null==(t=U.value)||t.validate((async e=>{var t,l,a;if(!e){L.value=!0;const e=await f({body:T.value}).finally((()=>L.value=!1));return"error"===(null==(t=e.data)?void 0:t.status)?P.error(null==(l=e.data)?void 0:l.message):(L.value=!1,C.push(`/user/tickets/${null==(a=e.data)?void 0:a.data.issue_no}`))}}))};return(e,t)=>(_(),a(g,{"header-title":e.$t("Create Ticket"),"toggle-header":!1,"show-footer":!1},{default:s((()=>[u(x,{class:"mx-auto p-4 md:p-10 space-y-10"},{default:s((()=>[u(r(h),{vertical:""},{default:s((()=>[i("div",j,[u(w,{to:"/user/tickets"})]),u(r(n),null,{default:s((()=>[u(r(y),{ref_key:"formRef",ref:U,"label-placement":"left","label-width":100,"label-align":"left",model:T.value,rules:D,onSubmit:o(M,["prevent"])},{default:s((()=>[u(r(b),{label:e.$t("Ticket Title"),path:"title"},{default:s((()=>[u(r(k),{value:T.value.title,"onUpdate:value":t[0]||(t[0]=e=>T.value.title=e),maxlength:20,placeholder:e.$t("Please enter the ticket title")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(r(b),{label:e.$t("Ticket Level"),path:"level"},{default:s((()=>[u(r($),{options:B,value:T.value.level,"onUpdate:value":t[1]||(t[1]=e=>T.value.level=e),placeholder:e.$t("Please select the ticket level")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(r(b),{label:e.$t("Issue Description"),path:"content"},{default:s((()=>[u(r(k),{type:"textarea",maxlength:2e3,value:T.value.content,"onUpdate:value":t[2]||(t[2]=e=>T.value.content=e),placeholder:e.$t("Please enter the issue description")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(r(b),{class:"flex justify-end"},{default:s((()=>[u(r(d),{"attr-type":"submit",type:"primary",loading:L.value},{default:s((()=>[p(v(e.$t("Confirm Creation")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1})])),_:1},8,["header-title"]))}});export{P as default};
