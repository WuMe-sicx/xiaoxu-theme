import{_ as e}from"./Content.vue_vue_type_script_setup_true_lang-BU2yl4QK.js";import{d as t,aj as a,j as s,i as l,k as r,a as i,o,M as n,ak as d,al as c,am as u,p,q as x,A as f,C as g,g as y,B as v,R as m,b as _,G as k,F as b,an as h,y as $,D as w,E as L,e as C,ao as P,a2 as S,O as T,ap as j,aq as z}from"./index-HMHCBO22.js";import{a as D,_ as M,n as E,r as N,s as U}from"./Layout.vue_vue_type_script_setup_true_lang-DggjovG3.js";import{u as q}from"./composables-sjxCGT15.js";import{N as A}from"./Ellipsis-CsA7j8A2.js";import{N as G}from"./Alert-Dp99rEM1.js";const R=["onClick"],F={class:"text-gray-400 flex shrink-0 ml-2"},I={class:"space-y-6 md:space-y-0 md:grid md:grid-cols-2 xl:grid-cols-4 md:gap-x-4 xl:gap-x-8 md:gap-y-4 xl:gap-y-8"},O={class:"flex flex-col"},V={class:"text-gray-700 text-sm dark:text-gray-400"},W={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},H={class:"flex flex-col"},Y={class:"text-gray-700 text-sm dark:text-gray-400"},B={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},J={class:"flex flex-col"},K={class:"text-gray-700 text-sm dark:text-gray-400"},Q={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},X={class:"flex flex-col"},Z={class:"text-gray-700 text-sm dark:text-gray-400"},ee={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},te={class:"flex flex-col"},ae={class:"text-gray-700 text-sm dark:text-gray-400"},se={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},le={class:"flex flex-col"},re={class:"text-gray-700 text-sm dark:text-gray-400"},ie={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},oe={class:"flex flex-col"},ne={class:"text-gray-700 text-sm dark:text-gray-400"},de={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},ce={class:"flex flex-col"},ue={class:"text-gray-700 text-sm dark:text-gray-400"},pe={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},xe={class:"relative flex flex-col p-4 bg-slate-50 dark:bg-gray-800 hover:bg-slate-100 dark:hover:bg-slate-800/70 rounded-md"},fe={class:"flex justify-between"},ge={class:"space-y-2"},ye={class:"text-xl text-gray-900 dark:text-gray-100"},ve={key:0,class:"text-sm text-gray-800 dark:text-gray-100"},me={key:1,class:"text-xs text-gray-600 dark:text-gray-200"},_e={key:0},ke={key:2,class:"text-xs text-gray-600 dark:text-gray-200"},be={key:0},he={class:"relative flex flex-col p-4 bg-slate-50 dark:bg-gray-800 hover:bg-slate-100 dark:hover:bg-slate-800/70 rounded-md"},$e={class:"flex justify-between"},we={class:"space-y-2"},Le={class:"text-xl text-gray-900 dark:text-gray-100"},Ce={key:0,class:"text-xs text-gray-600 dark:text-gray-200"},Pe={key:0},Se={key:1,class:"text-xs text-gray-600 dark:text-gray-200"},Te={key:0},je={class:"flex md:mt-8 flex-col-reverse md:flex-row space-y-6 md:space-y-0 md:space-x-4"},ze={class:"w-full mt-4 md:mt-0"},De={class:"w-full p-4 bg-slate-50 dark:bg-gray-800 hover:bg-slate-100 dark:hover:bg-slate-800/70 rounded-md"},Me={class:"dark:text-gray-400"},Ee={class:"text-gray-700 text-xs dark:text-gray-100"},Ne={class:"flex flex-col md:w-[70%] xl:w-[40%] space-y-8"},Ue={class:"flex"},qe={class:"basis-1/3 dark:text-gray-400"},Ae={class:"basis-2/3 truncate text-gray-800 dark:text-gray-100"},Ge={class:"flex"},Re={class:"basis-1/3 dark:text-gray-400"},Fe={class:"basis-2/3 truncate text-gray-800 dark:text-gray-100"},Ie={class:"flex"},Oe={class:"basis-1/3 dark:text-gray-400"},Ve={class:"basis-2/3 truncate text-gray-800 dark:text-gray-100"},We={class:"flex"},He={class:"basis-1/3 dark:text-gray-400"},Ye={class:"basis-2/3 truncate text-gray-800 dark:text-gray-100"},Be={class:"space-y-4"},Je={class:"space-y-2"},Ke={key:0,class:"font-medium"},Qe={key:1,class:"font-medium"},Xe={class:"flex flex-wrap gap-2"},Ze={class:"flex"},et={class:"basis-1/2 dark:text-gray-400"},tt={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},at={class:"flex"},st={class:"basis-1/2 dark:text-gray-400"},lt={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},rt={class:"flex"},it={class:"basis-1/2 dark:text-gray-400"},ot={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},nt={class:"flex"},dt={class:"basis-1/2 dark:text-gray-400"},ct={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},ut={class:"flex"},pt={class:"basis-1/2 dark:text-gray-400"},xt={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},ft={class:"flex"},gt={class:"basis-1/2 dark:text-gray-400"},yt={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},vt={class:"flex"},mt={class:"basis-1/2 dark:text-gray-400"},_t={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},kt={class:"flex"},bt={class:"basis-1/2 dark:text-gray-400"},ht={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},$t=t({__name:"IndexView",setup(t){var $t,wt;const Lt=a(),Ct=q(),Pt=D(),St=s(),Tt=l(),{t:jt}=r(),zt=Math.max(((null==($t=St.profile)?void 0:$t.total_storage)||0)-((null==(wt=St.profile)?void 0:wt.used_storage)||0),0),Dt=i([]),Mt=i([]),Et=i([]),Nt=e=>{const t=N(),a=N(e).diff(t);if(a<=0)return"已过期";const s=U.duration(a);return`${Math.floor(s.asDays())} 天 ${s.hours()} 小时 ${s.minutes()} 分钟 ${s.seconds()} 秒`};return o((()=>{d({query:{page:1,per_page:999}}).then((e=>{var t;Dt.value=(null==(t=e.data)?void 0:t.data.data)||[]})),c({query:{page:1,per_page:99}}).then((e=>{var t;Mt.value=(null==(t=e.data)?void 0:t.data.data)||[]})),u({query:{page:1,per_page:99}}).then((e=>{var t;Et.value=(null==(t=e.data)?void 0:t.data.data)||[]}))})),n((()=>St.profile),(()=>{u({query:{page:1,per_page:99}}).then((e=>{var t;Et.value=(null==(t=e.data)?void 0:t.data.data)||[]}))}),{deep:!0}),(t,a)=>(C(),p(M,{"header-title":t.$t("Dashboard"),"toggle-header":!1,"show-footer":!1},{default:x((()=>[f(e,{class:"mx-auto p-4 md:p-10 space-y-10"},{default:x((()=>{var e,s,l,r,i,o;return[Dt.value.length>0?(C(),p(v(m),{key:0,title:"站内公告"},{default:x((()=>[(C(!0),_(b,null,k(Dt.value,(e=>(C(),_("div",{class:"flex justify-between py-1 px-2 w-full transition-all rounded hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer",onClick:t=>(async e=>{var t,a;const s=await P({path:{id:e}});if(!(null==(t=s.data)?void 0:t.status))return Pt.error(s.data.message);Lt.create({title:null==(a=s.data)?void 0:a.data.title,preset:"card",class:"container m-4 md:mx-auto md:my-10 max-w-screen-md",content:()=>{var e,t;return[S("article",{class:"prose dark:prose-invert max-w-none overflow-x-auto",innerHTML:T.parse(null==(e=s.data)?void 0:e.data.content)}),S("p",{class:"mt-6 text-right"},N(null==(t=s.data)?void 0:t.data.created_at).fromNow())]}})})(e.id||0)},[f(v(A),null,{default:x((()=>[L($(e.title),1)])),_:2},1024),y("span",F,$(v(N)(e.created_at).fromNow()),1)],8,R)))),256))])),_:1})):g("",!0),y("div",I,[f(v(m),{"content-class":"flex space-x-4"},{default:x((()=>{var e;return[f(v(h),{icon:"fas fa-images",class:"text-amber-500 text-5xl"}),y("div",O,[y("p",V,$(t.$t("Number of Photos")),1),y("p",W,$(v(E).format((null==(e=v(St).profile)?void 0:e.photo_count)||0)),1)])]})),_:1}),f(v(m),{"content-class":"flex space-x-4"},{default:x((()=>[f(v(h),{icon:"fas fa-hdd",class:"text-red-500 text-5xl"}),y("div",H,[y("p",Y,$(t.$t("Available Storage")),1),y("p",B,$(v(E).fileSize(1024*v(zt))),1)])])),_:1}),f(v(m),{"content-class":"flex space-x-4"},{default:x((()=>{var e;return[f(v(h),{icon:"fas fa-hdd",class:"text-green-500 text-5xl"}),y("div",J,[y("p",K,$(t.$t("Used Storage")),1),y("p",Q,$(v(E).fileSize(1024*((null==(e=v(St).profile)?void 0:e.used_storage)||0))),1)])]})),_:1}),f(v(m),{"content-class":"flex space-x-4"},{default:x((()=>{var e;return[f(v(h),{icon:"fas fa-hdd",class:"text-emerald-500 text-5xl"}),y("div",X,[y("p",Z,$(t.$t("Total Storage")),1),y("p",ee,$(v(E).fileSize(1024*((null==(e=v(St).profile)?void 0:e.total_storage)||0))),1)])]})),_:1}),f(v(m),{"content-class":"flex space-x-4"},{default:x((()=>{var e;return[f(v(h),{icon:"fas fa-folder",class:"text-blue-500 text-5xl"}),y("div",te,[y("p",ae,$(t.$t("Album Count")),1),y("p",se,$(v(E).format((null==(e=v(St).profile)?void 0:e.album_count)||0)),1)])]})),_:1}),f(v(m),{"content-class":"flex space-x-4"},{default:x((()=>{var e;return[f(v(h),{icon:"fas fa-share-alt",class:"text-purple-500 text-5xl"}),y("div",le,[y("p",re,$(t.$t("Share Count")),1),y("p",ie,$(v(E).format((null==(e=v(St).profile)?void 0:e.share_count)||0)),1)])]})),_:1}),f(v(m),{"content-class":"flex space-x-4"},{default:x((()=>{var e;return[f(v(h),{icon:"fas fa-receipt",class:"text-orange-500 text-5xl"}),y("div",oe,[y("p",ne,$(t.$t("Order Count")),1),y("p",de,$(v(E).format((null==(e=v(St).profile)?void 0:e.order_count)||0)),1)])]})),_:1}),f(v(m),{"content-class":"flex space-x-4"},{default:x((()=>{var e;return[f(v(h),{icon:"fas fa-life-ring",class:"text-pink-500 text-5xl"}),y("div",ce,[y("p",ue,$(t.$t("Ticket Count")),1),y("p",pe,$(v(E).format((null==(e=v(St).profile)?void 0:e.ticket_count)||0)),1)])]})),_:1})]),Mt.value.length>0?(C(),p(v(m),{key:1,title:t.$t("Owned Role Groups"),"content-class":"space-y-2"},{default:x((()=>[(C(!0),_(b,null,k(Mt.value,(e=>{var a,s,l;return C(),_("div",xe,[y("div",fe,[y("div",ge,[y("h2",ye,$(null==(a=e.group)?void 0:a.name),1),(null==(s=e.group)?void 0:s.intro)?(C(),_("p",ve,$(null==(l=e.group)?void 0:l.intro),1)):g("",!0),"subscribe"===e.from?(C(),_("p",me,[y("span",null,$(t.$t("Purchased on {date}",{date:v(N)(e.created_at).format("LLL")})),1),e.expired_at?(C(),_("span",_e,", "+$(t.$t("Expires on {expired_at}, {day} remaining",{expired_at:v(N)(e.expired_at).format("LLL"),day:Nt(e.expired_at)}))+"。",1)):g("",!0)])):(C(),_("p",ke,$(t.$t("This role group is gifted by the system")),1))]),"system"!==e.from?(C(),_("div",be,[f(v(w),{type:"error",size:"small",strong:"",secondary:"",onClick:t=>(e=>{const t=Ct.warning({title:jt("Delete Purchased Role Groups"),content:jt("Warning: This action cannot be undone!"),positiveText:jt("Confirm"),negativeText:jt("Cancel"),onPositiveClick:()=>(t.loading=!0,new Promise((t=>{j({path:{id:e}}).then((()=>{c().then((e=>{var a;Mt.value=(null==(a=e.data)?void 0:a.data.data)||[],t(1)}))}))})))})})(e.id||0)},{default:x((()=>[L($(t.$t("Delete")),1)])),_:2},1032,["onClick"])])):g("",!0)])])})),256))])),_:1},8,["title"])):g("",!0),Et.value.length>0?(C(),p(v(m),{key:2,title:t.$t("Owned Storage"),"content-class":"space-y-2"},{default:x((()=>[(C(!0),_(b,null,k(Et.value,(e=>(C(),_("div",he,[y("div",$e,[y("div",we,[y("h2",Le,$(v(E).fileSize(1024*(e.capacity||0))),1),"subscribe"===e.from?(C(),_("p",Ce,[y("span",null,$(t.$t("Purchased on {date}",{date:v(N)(e.created_at).format("LLL")})),1),e.expired_at?(C(),_("span",Pe,", "+$(t.$t("Expires on {expired_at}, {day} remaining",{expired_at:v(N)(e.expired_at).format("LLL"),day:Nt(e.expired_at)}))+"。",1)):g("",!0)])):(C(),_("p",Se,$(t.$t("This storage is gifted by the system")),1))]),"system"!==e.from?(C(),_("div",Te,[f(v(w),{type:"error",size:"small",strong:"",secondary:"",onClick:t=>(e=>{const t=Ct.warning({title:jt("Delete Purchased Storage"),content:jt("Warning: This action cannot be undone!"),positiveText:jt("Confirm"),negativeText:jt("Cancel"),onPositiveClick:()=>(t.loading=!0,new Promise((t=>{z({path:{id:e}}).then((()=>{u().then((e=>{var a;Et.value=(null==(a=e.data)?void 0:a.data.data)||[],t(1)}))}))})))})})(e.id||0)},{default:x((()=>[L($(t.$t("Delete")),1)])),_:2},1032,["onClick"])])):g("",!0)])])))),256))])),_:1},8,["title"])):g("",!0),y("div",je,[y("div",ze,[(null==(e=v(Tt).group)?void 0:e.storages)?(C(),p(v(m),{key:0,title:t.$t("Available Policies"),"content-class":"divide-y dark:divide-slate-700 divide-solid space-y-2"},{default:x((()=>{var e;return[(C(!0),_(b,null,k(null==(e=v(Tt).group)?void 0:e.storages,(e=>(C(),_("div",De,[y("p",Me,$(e.name),1),y("span",Ee,$(e.intro),1)])))),256))]})),_:1},8,["title"])):g("",!0)]),y("div",Ne,[f(v(m),{title:t.$t("My Information"),"content-class":"space-y-3"},{default:x((()=>{var e,a,s,l;return[y("div",Ue,[y("p",qe,$(t.$t("Full Name")),1),y("p",Ae,$(null==(e=v(St).profile)?void 0:e.name),1)]),y("div",Ge,[y("p",Re,$(t.$t("Email")),1),y("p",Fe,$(null==(a=v(St).profile)?void 0:a.email),1)]),y("div",Ie,[y("p",Oe,$(t.$t("Registration Time")),1),y("p",Ve,$(v(N)(null==(s=v(St).profile)?void 0:s.created_at).format("LLL")),1)]),y("div",We,[y("p",He,$(t.$t("Login IP")),1),y("p",Ye,$(null==(l=v(St).profile)?void 0:l.login_ip),1)])]})),_:1},8,["title"]),(null==(s=v(Tt).configs)?void 0:s.app.user_email_verify)&&!(null==(l=v(St).profile)?void 0:l.email_verified_at)||(null==(r=v(Tt).configs)?void 0:r.app.user_phone_verify)&&!(null==(i=v(St).profile)?void 0:i.phone_verified_at)?(C(),p(v(m),{key:0},{default:x((()=>{var e,s,l,r;return[y("div",Be,[f(v(G),{type:"warning","show-icon":!0,title:""},{icon:x((()=>[f(v(h),{icon:"fas fa-exclamation-triangle"})])),default:x((()=>{var e,a,s,l;return[y("div",Je,[(null==(e=v(Tt).configs)?void 0:e.app.user_email_verify)&&!(null==(a=v(St).profile)?void 0:a.email_verified_at)?(C(),_("p",Ke,$(t.$t("Your email has not been verified. Please verify your email to ensure account security.")),1)):g("",!0),(null==(s=v(Tt).configs)?void 0:s.app.user_phone_verify)&&!(null==(l=v(St).profile)?void 0:l.phone_verified_at)?(C(),_("p",Qe,$(t.$t("Your phone number has not been verified. Please verify your phone number to ensure account security.")),1)):g("",!0)])]})),_:1}),y("div",Xe,[(null==(e=v(Tt).configs)?void 0:e.app.user_email_verify)&&!(null==(s=v(St).profile)?void 0:s.email_verified_at)?(C(),p(v(w),{key:0,type:"primary",onClick:a[0]||(a[0]=e=>t.$router.push("/user/profile?tab=email"))},{default:x((()=>[L($(t.$t("Verify Email")),1)])),_:1})):g("",!0),(null==(l=v(Tt).configs)?void 0:l.app.user_phone_verify)&&!(null==(r=v(St).profile)?void 0:r.phone_verified_at)?(C(),p(v(w),{key:1,type:"primary",onClick:a[1]||(a[1]=e=>t.$router.push("/user/profile?tab=phone"))},{default:x((()=>[L($(t.$t("Verify Phone")),1)])),_:1})):g("",!0)])])]})),_:1})):g("",!0),(null==(o=v(Tt).group)?void 0:o.group)?(C(),p(v(m),{key:1,title:t.$t("Current Role Group Information"),"content-class":"space-y-3"},{default:x((()=>{var e,a,s,l,r,i,o,n;return[y("div",Ze,[y("p",et,$(t.$t("Group Name")),1),y("p",tt,$(null==(e=v(Tt).group)?void 0:e.group.name),1)]),y("div",at,[y("p",st,$(t.$t("Maximum File Size")),1),y("p",lt,$(v(E).fileSize(1024*(null==(a=v(Tt).group)?void 0:a.group.options.max_upload_size))),1)]),y("div",rt,[y("p",it,$(t.$t("Concurrent Uploads")),1),y("p",ot,$(t.$t("{count} Pictures",{count:v(E).format(null==(s=v(Tt).group)?void 0:s.group.options.limit_concurrent_upload)})),1)]),y("div",nt,[y("p",dt,$(t.$t("Uploads per Minute Limit")),1),y("p",ct,$(t.$t("{count} Pictures",{count:v(E).format(null==(l=v(Tt).group)?void 0:l.group.options.limit_per_minute)})),1)]),y("div",ut,[y("p",pt,$(t.$t("Uploads per Hour Limit")),1),y("p",xt,$(t.$t("{count} Pictures",{count:v(E).format(null==(r=v(Tt).group)?void 0:r.group.options.limit_per_hour)})),1)]),y("div",ft,[y("p",gt,$(t.$t("Daily Upload Limit")),1),y("p",yt,$(t.$t("{count} Pictures",{count:v(E).format(null==(i=v(Tt).group)?void 0:i.group.options.limit_per_day)})),1)]),y("div",vt,[y("p",mt,$(t.$t("Weekly Upload Limit")),1),y("p",_t,$(t.$t("{count} Pictures",{count:v(E).format(null==(o=v(Tt).group)?void 0:o.group.options.limit_per_week)})),1)]),y("div",kt,[y("p",bt,$(t.$t("Monthly Upload Limit")),1),y("p",ht,$(t.$t("{count} Pictures",{count:v(E).format(null==(n=v(Tt).group)?void 0:n.group.options.limit_per_month)})),1)])]})),_:1},8,["title"])):g("",!0)])])]})),_:1})])),_:1},8,["header-title"]))}});export{$t as default};
